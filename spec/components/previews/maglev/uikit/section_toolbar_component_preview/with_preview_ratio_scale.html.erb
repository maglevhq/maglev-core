<div class="w-112 mx-auto relative scale-75" data-section-container>
  <div class="w-full">
    <div class="h-28 bg-green-200 flex items-center justify-center z-10" data-section-id="section-1">
      <p>Navbar</p>
    </div>
    <div class="h-28 bg-green-300 flex items-center justify-center z-10" data-section-id="section-2">
      <p>Hero</p>
    </div>
    <div class="h-28 bg-green-400 flex items-center justify-center z-10" data-section-id="section-3">
      <p>Features</p>
    </div>
  </div>
</div>

<%= render Maglev::Uikit::SectionToolbarComponent.new(id: "section-1", label: 'Navbar', paths: { show: '#' }, options: { insert_button: false }) %>
<%= render Maglev::Uikit::SectionToolbarComponent.new(id: "section-2", label: 'Hero', paths: { show: '#' }, options: { has_blocks: true}) %>
<%= render Maglev::Uikit::SectionToolbarComponent.new(id: "section-3", label: 'Features', paths: { show: '#' }) %>

<script>
  document.querySelectorAll('[data-section-id]').forEach(section => {
    section.addEventListener('mouseenter', triggerHover)
    section.addEventListener('mouseleave', triggerLeave)
  })

  function triggerHover(event) {
    const container = document.querySelector('[data-section-container]')
    if (!container.contains(event.currentTarget)) return

    const maglevEvent = new CustomEvent('maglev:section:hover', {
      detail: {
        sectionId: event.target.dataset.sectionId,
        sectionRect: event.currentTarget.getBoundingClientRect(),
        sectionOffsetTop: 0,
      },
    })
    window.dispatchEvent(maglevEvent)
  }

  function triggerLeave(event) {    
    if (event.relatedTarget.nodeName === 'A' || event.relatedTarget.nodeName === 'FORM' || event.relatedTarget.nodeName === 'BUTTON') return

    const maglevEvent = new CustomEvent('maglev:section:leave')
    window.dispatchEvent(maglevEvent)
  }
</script>