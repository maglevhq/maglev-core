// @shopify/draggable@1.1.4 downloaded from https://ga.jspm.io/npm:@shopify/draggable@1.1.4/build/esm/index.mjs

class AbstractEvent{constructor(t){this._canceled=false;this.data=t}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this._canceled=true}canceled(){return this._canceled}clone(t){return new this.constructor({...this.data,...t})}}AbstractEvent.type="event";AbstractEvent.cancelable=false;class AbstractPlugin{constructor(t){this.draggable=t}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}const t={mouse:0,drag:0,touch:100};class Sensor{constructor(t=[],e={}){this.containers=[...t];this.options={...e};this.dragging=false;this.currentContainer=null;this.originalSource=null;this.startEvent=null;this.delay=calcDelay(e.delay)}attach(){return this}detach(){return this}addContainer(...t){this.containers=[...this.containers,...t]}removeContainer(...t){this.containers=this.containers.filter((e=>!t.includes(e)))}trigger(t,e){const n=document.createEvent("Event");n.detail=e;n.initEvent(e.type,true,true);t.dispatchEvent(n);this.lastEvent=e;return e}}function calcDelay(e){const n={};if(e===void 0)return{...t};if(typeof e==="number"){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e);return n}for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]===void 0?n[r]=t[r]:n[r]=e[r]);return n}function closest(t,e){if(t==null)return null;function conditionFn(t){return t!=null&&e!=null&&(isSelector(e)?Element.prototype.matches.call(t,e):isNodeList(e)?[...e].includes(t):isElement(e)?e===t:!!isFunction(e)&&e(t))}let n=t;do{n=n.correspondingUseElement||n.correspondingElement||n;if(conditionFn(n))return n;n=n?.parentNode||null}while(n!=null&&n!==document.body&&n!==document);return null}function isSelector(t){return Boolean(typeof t==="string")}function isNodeList(t){return Boolean(t instanceof NodeList||t instanceof Array)}function isElement(t){return Boolean(t instanceof Node)}function isFunction(t){return Boolean(typeof t==="function")}function distance(t,e,n,r){return Math.sqrt((n-t)**2+(r-e)**2)}class SensorEvent extends AbstractEvent{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get originalSource(){return this.data.originalSource}get pressure(){return this.data.pressure}}class DragStartSensorEvent extends SensorEvent{}DragStartSensorEvent.type="drag:start";class DragMoveSensorEvent extends SensorEvent{}DragMoveSensorEvent.type="drag:move";class DragStopSensorEvent extends SensorEvent{}DragStopSensorEvent.type="drag:stop";class DragPressureSensorEvent extends SensorEvent{}DragPressureSensorEvent.type="drag:pressure";const e=Symbol("onContextMenuWhileDragging");const n=Symbol("onMouseDown");const r=Symbol("onMouseMove");const s=Symbol("onMouseUp");const o=Symbol("startDrag");const i=Symbol("onDistanceChange");class MouseSensor extends Sensor{constructor(t=[],a={}){super(t,a);this.mouseDownTimeout=null;this.pageX=null;this.pageY=null;this[e]=this[e].bind(this);this[n]=this[n].bind(this);this[r]=this[r].bind(this);this[s]=this[s].bind(this);this[o]=this[o].bind(this);this[i]=this[i].bind(this)}attach(){document.addEventListener("mousedown",this[n],true)}detach(){document.removeEventListener("mousedown",this[n],true)}[n](t){if(t.button!==0||t.ctrlKey||t.metaKey)return;const e=closest(t.target,this.containers);if(!e)return;if(this.options.handle&&t.target&&!closest(t.target,this.options.handle))return;const n=closest(t.target,this.options.draggable);if(!n)return;const{delay:r}=this;const{pageX:o,pageY:a}=t;Object.assign(this,{pageX:o,pageY:a});this.onMouseDownAt=Date.now();this.startEvent=t;this.currentContainer=e;this.originalSource=n;document.addEventListener("mouseup",this[s]);document.addEventListener("dragstart",preventNativeDragStart);document.addEventListener("mousemove",this[i]);this.mouseDownTimeout=window.setTimeout((()=>{this[i]({pageX:this.pageX,pageY:this.pageY})}),r.mouse)}[o](){const t=this.startEvent;const n=this.currentContainer;const s=this.originalSource;const o=new DragStartSensorEvent({clientX:t.clientX,clientY:t.clientY,target:t.target,container:n,originalSource:s,originalEvent:t});this.trigger(this.currentContainer,o);this.dragging=!o.canceled();if(this.dragging){document.addEventListener("contextmenu",this[e],true);document.addEventListener("mousemove",this[r])}}[i](t){const{pageX:e,pageY:n}=t;const{distance:r}=this.options;const{startEvent:s,delay:a}=this;Object.assign(this,{pageX:e,pageY:n});if(!this.currentContainer)return;const l=Date.now()-this.onMouseDownAt;const c=distance(s.pageX,s.pageY,e,n)||0;clearTimeout(this.mouseDownTimeout);if(l<a.mouse)document.removeEventListener("mousemove",this[i]);else if(c>=r){document.removeEventListener("mousemove",this[i]);this[o]()}}[r](t){if(!this.dragging)return;const e=document.elementFromPoint(t.clientX,t.clientY);const n=new DragMoveSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,n)}[s](t){clearTimeout(this.mouseDownTimeout);if(t.button!==0)return;document.removeEventListener("mouseup",this[s]);document.removeEventListener("dragstart",preventNativeDragStart);document.removeEventListener("mousemove",this[i]);if(!this.dragging)return;const n=document.elementFromPoint(t.clientX,t.clientY);const o=new DragStopSensorEvent({clientX:t.clientX,clientY:t.clientY,target:n,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,o);document.removeEventListener("contextmenu",this[e],true);document.removeEventListener("mousemove",this[r]);this.currentContainer=null;this.dragging=false;this.startEvent=null}[e](t){t.preventDefault()}}function preventNativeDragStart(t){t.preventDefault()}function touchCoords(t){const{touches:e,changedTouches:n}=t;return e&&e[0]||n&&n[0]}const a=Symbol("onTouchStart");const l=Symbol("onTouchEnd");const c=Symbol("onTouchMove");const d=Symbol("startDrag");const h=Symbol("onDistanceChange");let u=false;window.addEventListener("touchmove",(t=>{u&&t.preventDefault()}),{passive:false});class TouchSensor extends Sensor{constructor(t=[],e={}){super(t,e);this.currentScrollableParent=null;this.tapTimeout=null;this.touchMoved=false;this.pageX=null;this.pageY=null;this[a]=this[a].bind(this);this[l]=this[l].bind(this);this[c]=this[c].bind(this);this[d]=this[d].bind(this);this[h]=this[h].bind(this)}attach(){document.addEventListener("touchstart",this[a])}detach(){document.removeEventListener("touchstart",this[a])}[a](t){const e=closest(t.target,this.containers);if(!e)return;if(this.options.handle&&t.target&&!closest(t.target,this.options.handle))return;const n=closest(t.target,this.options.draggable);if(!n)return;const{distance:r=0}=this.options;const{delay:s}=this;const{pageX:o,pageY:i}=touchCoords(t);Object.assign(this,{pageX:o,pageY:i});this.onTouchStartAt=Date.now();this.startEvent=t;this.currentContainer=e;this.originalSource=n;document.addEventListener("touchend",this[l]);document.addEventListener("touchcancel",this[l]);document.addEventListener("touchmove",this[h]);e.addEventListener("contextmenu",onContextMenu);r&&(u=true);this.tapTimeout=window.setTimeout((()=>{this[h]({touches:[{pageX:this.pageX,pageY:this.pageY}]})}),s.touch)}[d](){const t=this.startEvent;const e=this.currentContainer;const n=touchCoords(t);const r=this.originalSource;const s=new DragStartSensorEvent({clientX:n.pageX,clientY:n.pageY,target:t.target,container:e,originalSource:r,originalEvent:t});this.trigger(this.currentContainer,s);this.dragging=!s.canceled();this.dragging&&document.addEventListener("touchmove",this[c]);u=this.dragging}[h](t){const{distance:e}=this.options;const{startEvent:n,delay:r}=this;const s=touchCoords(n);const o=touchCoords(t);const i=Date.now()-this.onTouchStartAt;const a=distance(s.pageX,s.pageY,o.pageX,o.pageY);Object.assign(this,o);clearTimeout(this.tapTimeout);if(i<r.touch)document.removeEventListener("touchmove",this[h]);else if(a>=e){document.removeEventListener("touchmove",this[h]);this[d]()}}[c](t){if(!this.dragging)return;const{pageX:e,pageY:n}=touchCoords(t);const r=document.elementFromPoint(e-window.scrollX,n-window.scrollY);const s=new DragMoveSensorEvent({clientX:e,clientY:n,target:r,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,s)}[l](t){clearTimeout(this.tapTimeout);u=false;document.removeEventListener("touchend",this[l]);document.removeEventListener("touchcancel",this[l]);document.removeEventListener("touchmove",this[h]);this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",onContextMenu);if(!this.dragging)return;document.removeEventListener("touchmove",this[c]);const{pageX:e,pageY:n}=touchCoords(t);const r=document.elementFromPoint(e-window.scrollX,n-window.scrollY);t.preventDefault();const s=new DragStopSensorEvent({clientX:e,clientY:n,target:r,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,s);this.currentContainer=null;this.dragging=false;this.startEvent=null}}function onContextMenu(t){t.preventDefault();t.stopPropagation()}const g=Symbol("onMouseDown");const p=Symbol("onMouseUp");const m=Symbol("onDragStart");const v=Symbol("onDragOver");const f=Symbol("onDragEnd");const b=Symbol("onDrop");const E=Symbol("reset");class DragSensor extends Sensor{constructor(t=[],e={}){super(t,e);this.mouseDownTimeout=null;this.draggableElement=null;this.nativeDraggableElement=null;this[g]=this[g].bind(this);this[p]=this[p].bind(this);this[m]=this[m].bind(this);this[v]=this[v].bind(this);this[f]=this[f].bind(this);this[b]=this[b].bind(this)}attach(){document.addEventListener("mousedown",this[g],true)}detach(){document.removeEventListener("mousedown",this[g],true)}[m](t){t.dataTransfer.setData("text","");t.dataTransfer.effectAllowed=this.options.type;const e=document.elementFromPoint(t.clientX,t.clientY);const n=this.draggableElement;if(!n)return;const r=new DragStartSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,originalSource:n,container:this.currentContainer,originalEvent:t});setTimeout((()=>{this.trigger(this.currentContainer,r);r.canceled()?this.dragging=false:this.dragging=true}),0)}[v](t){if(!this.dragging)return;const e=document.elementFromPoint(t.clientX,t.clientY);const n=this.currentContainer;const r=new DragMoveSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:n,originalEvent:t});this.trigger(n,r);if(!r.canceled()){t.preventDefault();t.dataTransfer.dropEffect=this.options.type}}[f](t){if(!this.dragging)return;document.removeEventListener("mouseup",this[p],true);const e=document.elementFromPoint(t.clientX,t.clientY);const n=this.currentContainer;const r=new DragStopSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:n,originalEvent:t});this.trigger(n,r);this.dragging=false;this.startEvent=null;this[E]()}[b](t){t.preventDefault()}[g](t){if(t.target&&(t.target.form||t.target.contenteditable))return;const e=t.target;this.currentContainer=closest(e,this.containers);if(!this.currentContainer)return;if(this.options.handle&&e&&!closest(e,this.options.handle))return;const n=closest(e,this.options.draggable);if(!n)return;const r=closest(t.target,(t=>t.draggable));if(r){r.draggable=false;this.nativeDraggableElement=r}document.addEventListener("mouseup",this[p],true);document.addEventListener("dragstart",this[m],false);document.addEventListener("dragover",this[v],false);document.addEventListener("dragend",this[f],false);document.addEventListener("drop",this[b],false);this.startEvent=t;this.mouseDownTimeout=setTimeout((()=>{n.draggable=true;this.draggableElement=n}),this.delay.drag)}[p](){this[E]()}[E](){clearTimeout(this.mouseDownTimeout);document.removeEventListener("mouseup",this[p],true);document.removeEventListener("dragstart",this[m],false);document.removeEventListener("dragover",this[v],false);document.removeEventListener("dragend",this[f],false);document.removeEventListener("drop",this[b],false);if(this.nativeDraggableElement){this.nativeDraggableElement.draggable=true;this.nativeDraggableElement=null}if(this.draggableElement){this.draggableElement.draggable=false;this.draggableElement=null}}}const S=Symbol("onMouseForceWillBegin");const y=Symbol("onMouseForceDown");const C=Symbol("onMouseDown");const D=Symbol("onMouseForceChange");const w=Symbol("onMouseMove");const x=Symbol("onMouseUp");const M=Symbol("onMouseForceGlobalChange");class ForceTouchSensor extends Sensor{constructor(t=[],e={}){super(t,e);this.mightDrag=false;this[S]=this[S].bind(this);this[y]=this[y].bind(this);this[C]=this[C].bind(this);this[D]=this[D].bind(this);this[w]=this[w].bind(this);this[x]=this[x].bind(this)}attach(){for(const t of this.containers){t.addEventListener("webkitmouseforcewillbegin",this[S],false);t.addEventListener("webkitmouseforcedown",this[y],false);t.addEventListener("mousedown",this[C],true);t.addEventListener("webkitmouseforcechanged",this[D],false)}document.addEventListener("mousemove",this[w]);document.addEventListener("mouseup",this[x])}detach(){for(const t of this.containers){t.removeEventListener("webkitmouseforcewillbegin",this[S],false);t.removeEventListener("webkitmouseforcedown",this[y],false);t.removeEventListener("mousedown",this[C],true);t.removeEventListener("webkitmouseforcechanged",this[D],false)}document.removeEventListener("mousemove",this[w]);document.removeEventListener("mouseup",this[x])}[S](t){t.preventDefault();this.mightDrag=true}[y](t){if(this.dragging)return;const e=document.elementFromPoint(t.clientX,t.clientY);const n=t.currentTarget;if(this.options.handle&&e&&!closest(e,this.options.handle))return;const r=closest(e,this.options.draggable);if(!r)return;const s=new DragStartSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:n,originalSource:r,originalEvent:t});this.trigger(n,s);this.currentContainer=n;this.dragging=!s.canceled();this.mightDrag=false}[x](t){if(!this.dragging)return;const e=new DragStopSensorEvent({clientX:t.clientX,clientY:t.clientY,target:null,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,e);this.currentContainer=null;this.dragging=false;this.mightDrag=false}[C](t){if(this.mightDrag){t.stopPropagation();t.stopImmediatePropagation();t.preventDefault()}}[w](t){if(!this.dragging)return;const e=document.elementFromPoint(t.clientX,t.clientY);const n=new DragMoveSensorEvent({clientX:t.clientX,clientY:t.clientY,target:e,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,n)}[D](t){if(this.dragging)return;const e=t.target;const n=t.currentTarget;const r=new DragPressureSensorEvent({pressure:t.webkitForce,clientX:t.clientX,clientY:t.clientY,target:e,container:n,originalEvent:t});this.trigger(n,r)}[M](t){if(!this.dragging)return;const e=t.target;const n=new DragPressureSensorEvent({pressure:t.webkitForce,clientX:t.clientX,clientY:t.clientY,target:e,container:this.currentContainer,originalEvent:t});this.trigger(this.currentContainer,n)}}var O=Object.freeze(Object.defineProperty({__proto__:null,DragMoveSensorEvent:DragMoveSensorEvent,DragPressureSensorEvent:DragPressureSensorEvent,DragSensor:DragSensor,DragStartSensorEvent:DragStartSensorEvent,DragStopSensorEvent:DragStopSensorEvent,ForceTouchSensor:ForceTouchSensor,MouseSensor:MouseSensor,Sensor:Sensor,SensorEvent:SensorEvent,TouchSensor:TouchSensor},Symbol.toStringTag,{value:"Module"}));class CollidableEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get dragEvent(){return this.data.dragEvent}}CollidableEvent.type="collidable";class CollidableInEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableInEvent.type="collidable:in";class CollidableOutEvent extends CollidableEvent{get collidingElement(){return this.data.collidingElement}}CollidableOutEvent.type="collidable:out";const A=Symbol("onDragMove");const L=Symbol("onDragStop");const F=Symbol("onRequestAnimationFrame");class Collidable extends AbstractPlugin{constructor(t){super(t);this.currentlyCollidingElement=null;this.lastCollidingElement=null;this.currentAnimationFrame=null;this[A]=this[A].bind(this);this[L]=this[L].bind(this);this[F]=this[F].bind(this)}attach(){this.draggable.on("drag:move",this[A]).on("drag:stop",this[L])}detach(){this.draggable.off("drag:move",this[A]).off("drag:stop",this[L])}getCollidables(){const t=this.draggable.options.collidables;return typeof t==="string"?Array.prototype.slice.call(document.querySelectorAll(t)):t instanceof NodeList||t instanceof Array?Array.prototype.slice.call(t):t instanceof HTMLElement?[t]:typeof t==="function"?t():[]}[A](t){const e=t.sensorEvent.target;this.currentAnimationFrame=requestAnimationFrame(this[F](e));this.currentlyCollidingElement&&t.cancel();const n=new CollidableInEvent({dragEvent:t,collidingElement:this.currentlyCollidingElement});const r=new CollidableOutEvent({dragEvent:t,collidingElement:this.lastCollidingElement});const s=Boolean(this.currentlyCollidingElement&&this.lastCollidingElement!==this.currentlyCollidingElement);const o=Boolean(!this.currentlyCollidingElement&&this.lastCollidingElement);if(s){this.lastCollidingElement&&this.draggable.trigger(r);this.draggable.trigger(n)}else o&&this.draggable.trigger(r);this.lastCollidingElement=this.currentlyCollidingElement}[L](t){const e=this.currentlyCollidingElement||this.lastCollidingElement;const n=new CollidableOutEvent({dragEvent:t,collidingElement:e});e&&this.draggable.trigger(n);this.lastCollidingElement=null;this.currentlyCollidingElement=null}[F](t){return()=>{const e=this.getCollidables();this.currentlyCollidingElement=closest(t,(t=>e.includes(t)))}}}function createAddInitializerMethod(t,e){return function(n){assertNotFinished(e,"addInitializer"),assertCallable(n,"An initializer"),t.push(n)}}function assertInstanceIfPrivate(t,e){if(!t(e))throw new TypeError("Attempted to access private element on non-instance")}function memberDec(t,e,n,r,s,o,i,a,l,c,d){var h;switch(o){case 1:h="accessor";break;case 2:h="method";break;case 3:h="getter";break;case 4:h="setter";break;default:h="field"}var u,g,p={kind:h,name:a?"#"+n:n,static:i,private:a,metadata:d},m={v:!1};if(0!==o&&(p.addInitializer=createAddInitializerMethod(s,m)),a||0!==o&&2!==o)if(2===o)u=function(t){return assertInstanceIfPrivate(c,t),r.value};else{var v=0===o||1===o;(v||3===o)&&(u=a?function(t){return assertInstanceIfPrivate(c,t),r.get.call(t)}:function(t){return r.get.call(t)}),(v||4===o)&&(g=a?function(t,e){assertInstanceIfPrivate(c,t),r.set.call(t,e)}:function(t,e){r.set.call(t,e)})}else u=function(t){return t[n]},0===o&&(g=function(t,e){t[n]=e});var f=a?c.bind():function(t){return n in t};p.access=u&&g?{get:u,set:g,has:f}:u?{get:u,has:f}:{set:g,has:f};try{return t.call(e,l,p)}finally{m.v=!0}}function assertNotFinished(t,e){if(t.v)throw new Error("attempted to call "+e+" after decoration was finished")}function assertCallable(t,e){if("function"!=typeof t)throw new TypeError(e+" must be a function")}function assertValidReturnValue(t,e){var n=typeof e;if(1===t){if("object"!==n||null===e)throw new TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==e.get&&assertCallable(e.get,"accessor.get"),void 0!==e.set&&assertCallable(e.set,"accessor.set"),void 0!==e.init&&assertCallable(e.init,"accessor.init")}else if("function"!==n){var r;throw r=0===t?"field":5===t?"class":"method",new TypeError(r+" decorators must return a function or void 0")}}function curryThis1(t){return function(){return t(this)}}function curryThis2(t){return function(e){t(this,e)}}function applyMemberDec(t,e,n,r,s,o,i,a,l,c,d){var h,u,g,p,m,v,f=n[0];r||Array.isArray(f)||(f=[f]),a?h=0===o||1===o?{get:curryThis1(n[3]),set:curryThis2(n[4])}:3===o?{get:n[3]}:4===o?{set:n[3]}:{value:n[3]}:0!==o&&(h=Object.getOwnPropertyDescriptor(e,s)),1===o?g={get:h.get,set:h.set}:2===o?g=h.value:3===o?g=h.get:4===o&&(g=h.set);for(var b=r?2:1,E=f.length-1;E>=0;E-=b){var S;void 0!==(p=memberDec(f[E],r?f[E-1]:void 0,s,h,l,o,i,a,g,c,d))&&(assertValidReturnValue(o,p),0===o?S=p:1===o?(S=p.init,m=p.get||g.get,v=p.set||g.set,g={get:m,set:v}):g=p,void 0!==S&&(void 0===u?u=S:"function"==typeof u?u=[u,S]:u.push(S)))}if(0===o||1===o){if(void 0===u)u=function(t,e){return e};else if("function"!=typeof u){var y=u;u=function(t,e){for(var n=e,r=y.length-1;r>=0;r--)n=y[r].call(t,n);return n}}else{var C=u;u=function(t,e){return C.call(t,e)}}t.push(u)}0!==o&&(1===o?(h.get=g.get,h.set=g.set):2===o?h.value=g:3===o?h.get=g:4===o&&(h.set=g),a?1===o?(t.push((function(t,e){return g.get.call(t,e)})),t.push((function(t,e){return g.set.call(t,e)}))):2===o?t.push(g):t.push((function(t,e){return g.call(t,e)})):Object.defineProperty(e,s,h))}function applyMemberDecs(t,e,n,r){for(var s,o,i,a=[],l=new Map,c=new Map,d=0;d<e.length;d++){var h=e[d];if(Array.isArray(h)){var u,g,p=h[1],m=h[2],v=h.length>3,f=16&p,b=!!(8&p),E=n;if(p&=7,b?(u=t,0!==p&&(g=o=o||[]),v&&!i&&(i=function(e){return _checkInRHS(e)===t}),E=i):(u=t.prototype,0!==p&&(g=s=s||[])),0!==p&&!v){var S=b?c:l,y=S.get(m)||0;if(!0===y||3===y&&4!==p||4===y&&3!==p)throw new Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+m);S.set(m,!(!y&&p>2)||p)}applyMemberDec(a,u,h,f,m,p,b,v,g,E,r)}}return pushInitializers(a,s),pushInitializers(a,o),a}function pushInitializers(t,e){e&&t.push((function(t){for(var n=0;n<e.length;n++)e[n].call(t);return t}))}function applyClassDecs(t,e,n,r){if(e.length){for(var s=[],o=t,i=t.name,a=n?2:1,l=e.length-1;l>=0;l-=a){var c={v:!1};try{var d=e[l].call(n?e[l-1]:void 0,o,{kind:"class",name:i,addInitializer:createAddInitializerMethod(s,c),metadata:r})}finally{c.v=!0}void 0!==d&&(assertValidReturnValue(5,d),o=d)}return[defineMetadata(o,r),function(){for(var t=0;t<s.length;t++)s[t].call(o)}]}}function defineMetadata(t,e){return Object.defineProperty(t,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:e})}function _applyDecs2305(t,e,n,r,s,o){if(arguments.length>=6)var i=o[Symbol.metadata||Symbol.for("Symbol.metadata")];var a=Object.create(void 0===i?null:i),l=applyMemberDecs(t,e,s,a);return n.length||defineMetadata(t,a),{e:l,get c(){return applyClassDecs(t,n,r,a)}}}function _checkInRHS(t){if(Object(t)!==t)throw TypeError("right-hand side of 'in' should be an object, got "+(null!==t?typeof t:"null"));return t}function AutoBind(t,{name:e,addInitializer:n}){n((function(){this[e]=t.bind(this)}))}function requestNextAnimationFrame(t){return requestAnimationFrame((()=>{requestAnimationFrame(t)}))}class DragEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}DragEvent.type="drag";class DragStartEvent extends DragEvent{}DragStartEvent.type="drag:start";DragStartEvent.cancelable=true;class DragMoveEvent extends DragEvent{}DragMoveEvent.type="drag:move";class DragOverEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOverEvent.type="drag:over";DragOverEvent.cancelable=true;function isDragOverEvent(t){return t.type===DragOverEvent.type}class DragOutEvent extends DragEvent{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}DragOutEvent.type="drag:out";class DragOverContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOverContainerEvent.type="drag:over:container";class DragOutContainerEvent extends DragEvent{get overContainer(){return this.data.overContainer}}DragOutContainerEvent.type="drag:out:container";class DragPressureEvent extends DragEvent{get pressure(){return this.data.pressure}}DragPressureEvent.type="drag:pressure";class DragStopEvent extends DragEvent{}DragStopEvent.type="drag:stop";DragStopEvent.cancelable=true;class DragStoppedEvent extends DragEvent{}DragStoppedEvent.type="drag:stopped";var T,X;const Y={};class ResizeMirror extends AbstractPlugin{constructor(t){T(super(t));this.lastWidth=0;this.lastHeight=0;this.mirror=null}attach(){this.draggable.on("mirror:created",this.onMirrorCreated).on("drag:over",this.onDragOver).on("drag:over:container",this.onDragOver)}detach(){this.draggable.off("mirror:created",this.onMirrorCreated).off("mirror:destroy",this.onMirrorDestroy).off("drag:over",this.onDragOver).off("drag:over:container",this.onDragOver)}getOptions(){return this.draggable.options.resizeMirror||{}}onMirrorCreated({mirror:t}){this.mirror=t}onMirrorDestroy(){this.mirror=null}onDragOver(t){this.resize(t)}resize(t){requestAnimationFrame((()=>{let e=null;const{overContainer:n}=t;if(this.mirror==null||this.mirror.parentNode==null)return;this.mirror.parentNode!==n&&n.appendChild(this.mirror);isDragOverEvent(t)&&(e=t.over);const r=e||this.draggable.getDraggableElementsForContainer(n)[0];r&&requestNextAnimationFrame((()=>{const t=r.getBoundingClientRect();if(this.mirror!=null&&(this.lastHeight!==t.height||this.lastWidth!==t.width)){this.mirror.style.width=`${t.width}px`;this.mirror.style.height=`${t.height}px`;this.lastWidth=t.width;this.lastHeight=t.height}}))}))}}X=ResizeMirror;[T]=_applyDecs2305(X,[[AutoBind,2,"onMirrorCreated"],[AutoBind,2,"onMirrorDestroy"],[AutoBind,2,"onDragOver"]],[],0,void 0,AbstractPlugin).e;class SnapEvent extends AbstractEvent{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}}SnapEvent.type="snap";class SnapInEvent extends SnapEvent{}SnapInEvent.type="snap:in";SnapInEvent.cancelable=true;class SnapOutEvent extends SnapEvent{}SnapOutEvent.type="snap:out";SnapOutEvent.cancelable=true;const P=Symbol("onDragStart");const N=Symbol("onDragStop");const z=Symbol("onDragOver");const I=Symbol("onDragOut");const $=Symbol("onMirrorCreated");const B=Symbol("onMirrorDestroy");class Snappable extends AbstractPlugin{constructor(t){super(t);this.firstSource=null;this.mirror=null;this[P]=this[P].bind(this);this[N]=this[N].bind(this);this[z]=this[z].bind(this);this[I]=this[I].bind(this);this[$]=this[$].bind(this);this[B]=this[B].bind(this)}attach(){this.draggable.on("drag:start",this[P]).on("drag:stop",this[N]).on("drag:over",this[z]).on("drag:out",this[I]).on("droppable:over",this[z]).on("droppable:out",this[I]).on("mirror:created",this[$]).on("mirror:destroy",this[B])}detach(){this.draggable.off("drag:start",this[P]).off("drag:stop",this[N]).off("drag:over",this[z]).off("drag:out",this[I]).off("droppable:over",this[z]).off("droppable:out",this[I]).off("mirror:created",this[$]).off("mirror:destroy",this[B])}[P](t){t.canceled()||(this.firstSource=t.source)}[N](){this.firstSource=null}[z](t){if(t.canceled())return;const e=t.source||t.dragEvent.source;if(e===this.firstSource){this.firstSource=null;return}const n=new SnapInEvent({dragEvent:t,snappable:t.over||t.droppable});this.draggable.trigger(n);if(!n.canceled()){this.mirror&&(this.mirror.style.display="none");e.classList.remove(...this.draggable.getClassNamesFor("source:dragging"));e.classList.add(...this.draggable.getClassNamesFor("source:placed"));setTimeout((()=>{e.classList.remove(...this.draggable.getClassNamesFor("source:placed"))}),this.draggable.options.placedTimeout)}}[I](t){if(t.canceled())return;const e=t.source||t.dragEvent.source;const n=new SnapOutEvent({dragEvent:t,snappable:t.over||t.droppable});this.draggable.trigger(n);if(!n.canceled()){this.mirror&&(this.mirror.style.display="");e.classList.add(...this.draggable.getClassNamesFor("source:dragging"))}}[$]({mirror:t}){this.mirror=t}[B](){this.mirror=null}}var k,R;const q={duration:150,easingFunction:"ease-in-out",horizontal:false};class SwapAnimation extends AbstractPlugin{constructor(t){k(super(t));this.options={...q,...this.getOptions()};this.lastAnimationFrame=null}attach(){this.draggable.on("sortable:sorted",this.onSortableSorted)}detach(){this.draggable.off("sortable:sorted",this.onSortableSorted)}getOptions(){return this.draggable.options.swapAnimation||{}}onSortableSorted({oldIndex:t,newIndex:e,dragEvent:n}){const{source:r,over:s}=n;this.lastAnimationFrame&&cancelAnimationFrame(this.lastAnimationFrame);this.lastAnimationFrame=requestAnimationFrame((()=>{t>=e?animate$1(r,s,this.options):animate$1(s,r,this.options)}))}}R=SwapAnimation;[k]=_applyDecs2305(R,[[AutoBind,2,"onSortableSorted"]],[],0,void 0,AbstractPlugin).e;function animate$1(t,e,{duration:n,easingFunction:r,horizontal:s}){for(const n of[t,e])n.style.pointerEvents="none";if(s){const n=t.offsetWidth;t.style.transform=`translate3d(${n}px, 0, 0)`;e.style.transform=`translate3d(-${n}px, 0, 0)`}else{const n=t.offsetHeight;t.style.transform=`translate3d(0, ${n}px, 0)`;e.style.transform=`translate3d(0, -${n}px, 0)`}requestAnimationFrame((()=>{for(const s of[t,e]){s.addEventListener("transitionend",resetElementOnTransitionEnd$1);s.style.transition=`transform ${n}ms ${r}`;s.style.transform=""}}))}function resetElementOnTransitionEnd$1(t){if(t.target!=null&&isHTMLElement(t.target)){t.target.style.transition="";t.target.style.pointerEvents="";t.target.removeEventListener("transitionend",resetElementOnTransitionEnd$1)}}function isHTMLElement(t){return Boolean("style"in t)}const _=Symbol("onSortableSorted");const j=Symbol("onSortableSort");const H={duration:150,easingFunction:"ease-in-out"};class SortAnimation extends AbstractPlugin{constructor(t){super(t);this.options={...H,...this.getOptions()};this.lastAnimationFrame=null;this.lastElements=[];this[_]=this[_].bind(this);this[j]=this[j].bind(this)}attach(){this.draggable.on("sortable:sort",this[j]);this.draggable.on("sortable:sorted",this[_])}detach(){this.draggable.off("sortable:sort",this[j]);this.draggable.off("sortable:sorted",this[_])}getOptions(){return this.draggable.options.sortAnimation||{}}[j]({dragEvent:t}){const{sourceContainer:e}=t;const n=this.draggable.getDraggableElementsForContainer(e);this.lastElements=Array.from(n).map((t=>({domEl:t,offsetTop:t.offsetTop,offsetLeft:t.offsetLeft})))}[_]({oldIndex:t,newIndex:e}){if(t===e)return;const n=[];let r;let s;let o;if(t>e){r=e;s=t-1;o=1}else{r=t+1;s=e;o=-1}for(let t=r;t<=s;t++){const e=this.lastElements[t];const r=this.lastElements[t+o];n.push({from:e,to:r})}cancelAnimationFrame(this.lastAnimationFrame);this.lastAnimationFrame=requestAnimationFrame((()=>{n.forEach((t=>animate(t,this.options)))}))}}function animate({from:t,to:e},{duration:n,easingFunction:r}){const s=t.domEl;const o=t.offsetLeft-e.offsetLeft;const i=t.offsetTop-e.offsetTop;s.style.pointerEvents="none";s.style.transform=`translate3d(${o}px, ${i}px, 0)`;requestAnimationFrame((()=>{s.addEventListener("transitionend",resetElementOnTransitionEnd);s.style.transition=`transform ${n}ms ${r}`;s.style.transform=""}))}function resetElementOnTransitionEnd(t){t.target.style.transition="";t.target.style.pointerEvents="";t.target.removeEventListener("transitionend",resetElementOnTransitionEnd)}var V=Object.freeze(Object.defineProperty({__proto__:null,Collidable:Collidable,ResizeMirror:ResizeMirror,Snappable:Snappable,SortAnimation:SortAnimation,SwapAnimation:SwapAnimation,defaultResizeMirrorOptions:Y,defaultSortAnimationOptions:H,defaultSwapAnimationOptions:q},Symbol.toStringTag,{value:"Module"}));const U=Symbol("onInitialize");const W=Symbol("onDestroy");const G=Symbol("announceEvent");const K=Symbol("announceMessage");const Z="aria-relevant";const J="aria-atomic";const Q="aria-live";const tt="role";const et={expire:7e3};class Announcement extends AbstractPlugin{constructor(t){super(t);this.options={...et,...this.getOptions()};this.originalTriggerMethod=this.draggable.trigger;this[U]=this[U].bind(this);this[W]=this[W].bind(this)}attach(){this.draggable.on("draggable:initialize",this[U])}detach(){this.draggable.off("draggable:destroy",this[W])}getOptions(){return this.draggable.options.announcements||{}}[G](t){const e=this.options[t.type];e&&typeof e==="string"&&this[K](e);e&&typeof e==="function"&&this[K](e(t))}[K](t){announce(t,{expire:this.options.expire})}[U](){this.draggable.trigger=t=>{try{this[G](t)}finally{this.originalTriggerMethod.call(this.draggable,t)}}}[W](){this.draggable.trigger=this.originalTriggerMethod}}const nt=createRegion();function announce(t,{expire:e}){const n=document.createElement("div");n.textContent=t;nt.appendChild(n);return setTimeout((()=>{nt.removeChild(n)}),e)}function createRegion(){const t=document.createElement("div");t.setAttribute("id","draggable-live-region");t.setAttribute(Z,"additions");t.setAttribute(J,"true");t.setAttribute(Q,"assertive");t.setAttribute(tt,"log");t.style.position="fixed";t.style.width="1px";t.style.height="1px";t.style.top="-1px";t.style.overflow="hidden";return t}document.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(nt)}));const rt=Symbol("onInitialize");const st=Symbol("onDestroy");const ot={};class Focusable extends AbstractPlugin{constructor(t){super(t);this.options={...ot,...this.getOptions()};this[rt]=this[rt].bind(this);this[st]=this[st].bind(this)}attach(){this.draggable.on("draggable:initialize",this[rt]).on("draggable:destroy",this[st])}detach(){this.draggable.off("draggable:initialize",this[rt]).off("draggable:destroy",this[st]);this[st]()}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[rt](){requestAnimationFrame((()=>{this.getElements().forEach((t=>decorateElement(t)))}))}[st](){requestAnimationFrame((()=>{this.getElements().forEach((t=>stripElement(t)))}))}}const it=[];function decorateElement(t){const e=Boolean(!t.getAttribute("tabindex")&&t.tabIndex===-1);if(e){it.push(t);t.tabIndex=0}}function stripElement(t){const e=it.indexOf(t);if(e!==-1){t.tabIndex=-1;it.splice(e,1)}}class MirrorEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}class MirrorCreateEvent extends MirrorEvent{}MirrorCreateEvent.type="mirror:create";class MirrorCreatedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorCreatedEvent.type="mirror:created";class MirrorAttachedEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorAttachedEvent.type="mirror:attached";class MirrorMoveEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMoveEvent.type="mirror:move";MirrorMoveEvent.cancelable=true;class MirrorMovedEvent extends MirrorEvent{get mirror(){return this.data.mirror}get passedThreshX(){return this.data.passedThreshX}get passedThreshY(){return this.data.passedThreshY}}MirrorMovedEvent.type="mirror:moved";class MirrorDestroyEvent extends MirrorEvent{get mirror(){return this.data.mirror}}MirrorDestroyEvent.type="mirror:destroy";MirrorDestroyEvent.cancelable=true;const at=Symbol("onDragStart");const lt=Symbol("onDragMove");const ct=Symbol("onDragStop");const dt=Symbol("onMirrorCreated");const ht=Symbol("onMirrorMove");const ut=Symbol("onScroll");const gt=Symbol("getAppendableContainer");const pt={constrainDimensions:false,xAxis:true,yAxis:true,cursorOffsetX:null,cursorOffsetY:null,thresholdX:null,thresholdY:null};class Mirror extends AbstractPlugin{constructor(t){super(t);this.options={...pt,...this.getOptions()};this.scrollOffset={x:0,y:0};this.initialScrollOffset={x:window.scrollX,y:window.scrollY};this[at]=this[at].bind(this);this[lt]=this[lt].bind(this);this[ct]=this[ct].bind(this);this[dt]=this[dt].bind(this);this[ht]=this[ht].bind(this);this[ut]=this[ut].bind(this)}attach(){this.draggable.on("drag:start",this[at]).on("drag:move",this[lt]).on("drag:stop",this[ct]).on("mirror:created",this[dt]).on("mirror:move",this[ht])}detach(){this.draggable.off("drag:start",this[at]).off("drag:move",this[lt]).off("drag:stop",this[ct]).off("mirror:created",this[dt]).off("mirror:move",this[ht])}getOptions(){return this.draggable.options.mirror||{}}[at](t){if(t.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[ut],true);this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:e,originalSource:n,sourceContainer:r,sensorEvent:s}=t;this.lastMirrorMovedClient={x:s.clientX,y:s.clientY};const o=new MirrorCreateEvent({source:e,originalSource:n,sourceContainer:r,sensorEvent:s,dragEvent:t});this.draggable.trigger(o);if(isNativeDragEvent(s)||o.canceled())return;const i=this[gt](e)||r;this.mirror=e.cloneNode(true);const a=new MirrorCreatedEvent({source:e,originalSource:n,sourceContainer:r,sensorEvent:s,dragEvent:t,mirror:this.mirror});const l=new MirrorAttachedEvent({source:e,originalSource:n,sourceContainer:r,sensorEvent:s,dragEvent:t,mirror:this.mirror});this.draggable.trigger(a);i.appendChild(this.mirror);this.draggable.trigger(l)}[lt](t){if(!this.mirror||t.canceled())return;const{source:e,originalSource:n,sourceContainer:r,sensorEvent:s}=t;let o=true;let i=true;if(this.options.thresholdX||this.options.thresholdY){const{x:t,y:e}=this.lastMirrorMovedClient;Math.abs(t-s.clientX)<this.options.thresholdX?o=false:this.lastMirrorMovedClient.x=s.clientX;Math.abs(e-s.clientY)<this.options.thresholdY?i=false:this.lastMirrorMovedClient.y=s.clientY;if(!o&&!i)return}const a=new MirrorMoveEvent({source:e,originalSource:n,sourceContainer:r,sensorEvent:s,dragEvent:t,mirror:this.mirror,passedThreshX:o,passedThreshY:i});this.draggable.trigger(a)}[ct](t){"ontouchstart"in window&&document.removeEventListener("scroll",this[ut],true);this.initialScrollOffset={x:0,y:0};this.scrollOffset={x:0,y:0};if(!this.mirror)return;const{source:e,sourceContainer:n,sensorEvent:r}=t;const s=new MirrorDestroyEvent({source:e,mirror:this.mirror,sourceContainer:n,sensorEvent:r,dragEvent:t});this.draggable.trigger(s);s.canceled()||this.mirror.remove()}[ut](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[dt]({mirror:t,source:e,sensorEvent:n}){const r=this.draggable.getClassNamesFor("mirror");const setState=({mirrorOffset:t,initialX:e,initialY:n,...r})=>{this.mirrorOffset=t;this.initialX=e;this.initialY=n;this.lastMovedX=e;this.lastMovedY=n;return{mirrorOffset:t,initialX:e,initialY:n,...r}};t.style.display="none";const s={mirror:t,source:e,sensorEvent:n,mirrorClasses:r,scrollOffset:this.scrollOffset,options:this.options,passedThreshX:true,passedThreshY:true};return Promise.resolve(s).then(computeMirrorDimensions).then(calculateMirrorOffset).then(resetMirror).then(addMirrorClasses).then(positionMirror({initial:true})).then(removeMirrorID).then(setState)}[ht](t){if(t.canceled())return null;const setState=({lastMovedX:t,lastMovedY:e,...n})=>{this.lastMovedX=t;this.lastMovedY=e;return{lastMovedX:t,lastMovedY:e,...n}};const triggerMoved=e=>{const n=new MirrorMovedEvent({source:t.source,originalSource:t.originalSource,sourceContainer:t.sourceContainer,sensorEvent:t.sensorEvent,dragEvent:t.dragEvent,mirror:this.mirror,passedThreshX:t.passedThreshX,passedThreshY:t.passedThreshY});this.draggable.trigger(n);return e};const e={mirror:t.mirror,sensorEvent:t.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset,passedThreshX:t.passedThreshX,passedThreshY:t.passedThreshY,lastMovedX:this.lastMovedX,lastMovedY:this.lastMovedY};return Promise.resolve(e).then(positionMirror({raf:true})).then(setState).then(triggerMoved)}[gt](t){const e=this.options.appendTo;return typeof e==="string"?document.querySelector(e):e instanceof HTMLElement?e:typeof e==="function"?e(t):t.parentNode}}function computeMirrorDimensions({source:t,...e}){return withPromise((n=>{const r=t.getBoundingClientRect();n({source:t,sourceRect:r,...e})}))}function calculateMirrorOffset({sensorEvent:t,sourceRect:e,options:n,...r}){return withPromise((s=>{const o=n.cursorOffsetY===null?t.clientY-e.top:n.cursorOffsetY;const i=n.cursorOffsetX===null?t.clientX-e.left:n.cursorOffsetX;const a={top:o,left:i};s({sensorEvent:t,sourceRect:e,mirrorOffset:a,options:n,...r})}))}function resetMirror({mirror:t,source:e,options:n,...r}){return withPromise((s=>{let o;let i;if(n.constrainDimensions){const t=getComputedStyle(e);o=t.getPropertyValue("height");i=t.getPropertyValue("width")}t.style.display=null;t.style.position="fixed";t.style.pointerEvents="none";t.style.top=0;t.style.left=0;t.style.margin=0;if(n.constrainDimensions){t.style.height=o;t.style.width=i}s({mirror:t,source:e,options:n,...r})}))}function addMirrorClasses({mirror:t,mirrorClasses:e,...n}){return withPromise((r=>{t.classList.add(...e);r({mirror:t,mirrorClasses:e,...n})}))}function removeMirrorID({mirror:t,...e}){return withPromise((n=>{t.removeAttribute("id");delete t.id;n({mirror:t,...e})}))}function positionMirror({withFrame:t=false,initial:e=false}={}){return({mirror:n,sensorEvent:r,mirrorOffset:s,initialY:o,initialX:i,scrollOffset:a,options:l,passedThreshX:c,passedThreshY:d,lastMovedX:h,lastMovedY:u,...g})=>withPromise((t=>{const p={mirror:n,sensorEvent:r,mirrorOffset:s,options:l,...g};if(s){const t=c?Math.round((r.clientX-s.left-a.x)/(l.thresholdX||1))*(l.thresholdX||1):Math.round(h);const g=d?Math.round((r.clientY-s.top-a.y)/(l.thresholdY||1))*(l.thresholdY||1):Math.round(u);l.xAxis&&l.yAxis||e?n.style.transform=`translate3d(${t}px, ${g}px, 0)`:l.xAxis&&!l.yAxis?n.style.transform=`translate3d(${t}px, ${o}px, 0)`:l.yAxis&&!l.xAxis&&(n.style.transform=`translate3d(${i}px, ${g}px, 0)`);if(e){p.initialX=t;p.initialY=g}p.lastMovedX=t;p.lastMovedY=g}t(p)}),{frame:t})}function withPromise(t,{raf:e=false}={}){return new Promise(((n,r)=>{e?requestAnimationFrame((()=>{t(n,r)})):t(n,r)}))}function isNativeDragEvent(t){return/^drag/.test(t.originalEvent.type)}const mt=Symbol("onDragStart");const vt=Symbol("onDragMove");const ft=Symbol("onDragStop");const bt=Symbol("scroll");const Et={speed:6,sensitivity:50,scrollableElements:[]};class Scrollable extends AbstractPlugin{constructor(t){super(t);this.options={...Et,...this.getOptions()};this.currentMousePosition=null;this.scrollAnimationFrame=null;this.scrollableElement=null;this.findScrollableElementFrame=null;this[mt]=this[mt].bind(this);this[vt]=this[vt].bind(this);this[ft]=this[ft].bind(this);this[bt]=this[bt].bind(this)}attach(){this.draggable.on("drag:start",this[mt]).on("drag:move",this[vt]).on("drag:stop",this[ft])}detach(){this.draggable.off("drag:start",this[mt]).off("drag:move",this[vt]).off("drag:stop",this[ft])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(t){return this.hasDefinedScrollableElements()?closest(t,this.options.scrollableElements)||document.documentElement:closestScrollableElement(t)}hasDefinedScrollableElements(){return Boolean(this.options.scrollableElements.length!==0)}[mt](t){this.findScrollableElementFrame=requestAnimationFrame((()=>{this.scrollableElement=this.getScrollableElement(t.source)}))}[vt](t){this.findScrollableElementFrame=requestAnimationFrame((()=>{this.scrollableElement=this.getScrollableElement(t.sensorEvent.target)}));if(!this.scrollableElement)return;const e=t.sensorEvent;const n={x:0,y:0};if("ontouchstart"in window){n.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;n.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0}this.currentMousePosition={clientX:e.clientX-n.x,clientY:e.clientY-n.y};this.scrollAnimationFrame=requestAnimationFrame(this[bt])}[ft](){cancelAnimationFrame(this.scrollAnimationFrame);cancelAnimationFrame(this.findScrollableElementFrame);this.scrollableElement=null;this.scrollAnimationFrame=null;this.findScrollableElementFrame=null;this.currentMousePosition=null}[bt](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:t,sensitivity:e}=this.options;const n=this.scrollableElement.getBoundingClientRect();const r=n.bottom>window.innerHeight;const s=n.top<0;const o=s||r;const i=getDocumentScrollingElement();const a=this.scrollableElement;const l=this.currentMousePosition.clientX;const c=this.currentMousePosition.clientY;if(a===document.body||a===document.documentElement||o){const{innerHeight:n,innerWidth:r}=window;c<e?i.scrollTop-=t:n-c<e&&(i.scrollTop+=t);l<e?i.scrollLeft-=t:r-l<e&&(i.scrollLeft+=t)}else{const{offsetHeight:r,offsetWidth:s}=a;n.top+r-c<e?a.scrollTop+=t:c-n.top<e&&(a.scrollTop-=t);n.left+s-l<e?a.scrollLeft+=t:l-n.left<e&&(a.scrollLeft-=t)}this.scrollAnimationFrame=requestAnimationFrame(this[bt])}}function hasOverflow(t){const e=/(auto|scroll)/;const n=getComputedStyle(t,null);const r=n.getPropertyValue("overflow")+n.getPropertyValue("overflow-y")+n.getPropertyValue("overflow-x");return e.test(r)}function isStaticallyPositioned(t){const e=getComputedStyle(t).getPropertyValue("position");return e==="static"}function closestScrollableElement(t){if(!t)return getDocumentScrollingElement();const e=getComputedStyle(t).getPropertyValue("position");const n=e==="absolute";const r=closest(t,(t=>(!n||!isStaticallyPositioned(t))&&hasOverflow(t)));return e!=="fixed"&&r?r:getDocumentScrollingElement()}function getDocumentScrollingElement(){return document.scrollingElement||document.documentElement}class Emitter{constructor(){this.callbacks={}}on(t,...e){this.callbacks[t]||(this.callbacks[t]=[]);this.callbacks[t].push(...e);return this}off(t,e){if(!this.callbacks[t])return null;const n=this.callbacks[t].slice(0);for(let r=0;r<n.length;r++)e===n[r]&&this.callbacks[t].splice(r,1);return this}trigger(t){if(!this.callbacks[t.type])return null;const e=[...this.callbacks[t.type]];const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];try{s(t)}catch(t){n.push(t)}}n.length&&console.error(`Draggable caught errors while triggering '${t.type}'`,n);return this}}class DraggableEvent extends AbstractEvent{get draggable(){return this.data.draggable}}DraggableEvent.type="draggable";class DraggableInitializedEvent extends DraggableEvent{}DraggableInitializedEvent.type="draggable:initialize";class DraggableDestroyEvent extends DraggableEvent{}DraggableDestroyEvent.type="draggable:destroy";const St=Symbol("onDragStart");const yt=Symbol("onDragMove");const Ct=Symbol("onDragStop");const Dt=Symbol("onDragPressure");const wt=Symbol("dragStop");const xt={"drag:start":t=>`Picked up ${t.source.textContent.trim()||t.source.id||"draggable element"}`,"drag:stop":t=>`Released ${t.source.textContent.trim()||t.source.id||"draggable element"}`};const Mt={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"};const Ot={draggable:".draggable-source",handle:null,delay:{},distance:0,placedTimeout:800,plugins:[],sensors:[],exclude:{plugins:[],sensors:[]}};class Draggable{constructor(t=[document.body],e={}){if(t instanceof NodeList||t instanceof Array)this.containers=[...t];else{if(!(t instanceof HTMLElement))throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.containers=[t]}this.options={...Ot,...e,classes:{...Mt,...e.classes||{}},announcements:{...xt,...e.announcements||{}},exclude:{plugins:e.exclude&&e.exclude.plugins||[],sensors:e.exclude&&e.exclude.sensors||[]}};this.emitter=new Emitter;this.dragging=false;this.plugins=[];this.sensors=[];this[St]=this[St].bind(this);this[yt]=this[yt].bind(this);this[Ct]=this[Ct].bind(this);this[Dt]=this[Dt].bind(this);this[wt]=this[wt].bind(this);document.addEventListener("drag:start",this[St],true);document.addEventListener("drag:move",this[yt],true);document.addEventListener("drag:stop",this[Ct],true);document.addEventListener("drag:pressure",this[Dt],true);const n=Object.values(Draggable.Plugins).filter((t=>!this.options.exclude.plugins.includes(t)));const r=Object.values(Draggable.Sensors).filter((t=>!this.options.exclude.sensors.includes(t)));this.addPlugin(...n,...this.options.plugins);this.addSensor(...r,...this.options.sensors);const s=new DraggableInitializedEvent({draggable:this});this.on("mirror:created",(({mirror:t})=>this.mirror=t));this.on("mirror:destroy",(()=>this.mirror=null));this.trigger(s)}destroy(){document.removeEventListener("drag:start",this[St],true);document.removeEventListener("drag:move",this[yt],true);document.removeEventListener("drag:stop",this[Ct],true);document.removeEventListener("drag:pressure",this[Dt],true);const t=new DraggableDestroyEvent({draggable:this});this.trigger(t);this.removePlugin(...this.plugins.map((t=>t.constructor)));this.removeSensor(...this.sensors.map((t=>t.constructor)))}addPlugin(...t){const e=t.map((t=>new t(this)));e.forEach((t=>t.attach()));this.plugins=[...this.plugins,...e];return this}removePlugin(...t){const e=this.plugins.filter((e=>t.includes(e.constructor)));e.forEach((t=>t.detach()));this.plugins=this.plugins.filter((e=>!t.includes(e.constructor)));return this}addSensor(...t){const e=t.map((t=>new t(this.containers,this.options)));e.forEach((t=>t.attach()));this.sensors=[...this.sensors,...e];return this}removeSensor(...t){const e=this.sensors.filter((e=>t.includes(e.constructor)));e.forEach((t=>t.detach()));this.sensors=this.sensors.filter((e=>!t.includes(e.constructor)));return this}addContainer(...t){this.containers=[...this.containers,...t];this.sensors.forEach((e=>e.addContainer(...t)));return this}removeContainer(...t){this.containers=this.containers.filter((e=>!t.includes(e)));this.sensors.forEach((e=>e.removeContainer(...t)));return this}on(t,...e){this.emitter.on(t,...e);return this}off(t,e){this.emitter.off(t,e);return this}trigger(t){this.emitter.trigger(t);return this}getClassNameFor(t){return this.getClassNamesFor(t)[0]}getClassNamesFor(t){const e=this.options.classes[t];return e instanceof Array?e:typeof e==="string"||e instanceof String?[e]:[]}isDragging(){return Boolean(this.dragging)}getDraggableElements(){return this.containers.reduce(((t,e)=>[...t,...this.getDraggableElementsForContainer(e)]),[])}getDraggableElementsForContainer(t){const e=t.querySelectorAll(this.options.draggable);return[...e].filter((t=>t!==this.originalSource&&t!==this.mirror))}cancel(){this[wt]()}[St](t){const e=getSensorEvent(t);const{target:n,container:r,originalSource:s}=e;if(!this.containers.includes(r))return;if(this.options.handle&&n&&!closest(n,this.options.handle)){e.cancel();return}this.originalSource=s;this.sourceContainer=r;if(this.lastPlacedSource&&this.lastPlacedContainer){clearTimeout(this.placedTimeoutID);this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed"));this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"))}this.source=this.originalSource.cloneNode(true);this.originalSource.parentNode.insertBefore(this.source,this.originalSource);this.originalSource.style.display="none";const o=new DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:r,sensorEvent:e});this.trigger(o);this.dragging=!o.canceled();if(o.canceled()){this.source.remove();this.originalSource.style.display=null}else{this.originalSource.classList.add(...this.getClassNamesFor("source:original"));this.source.classList.add(...this.getClassNamesFor("source:dragging"));this.sourceContainer.classList.add(...this.getClassNamesFor("container:dragging"));document.body.classList.add(...this.getClassNamesFor("body:dragging"));applyUserSelect(document.body,"none");requestAnimationFrame((()=>{const e=getSensorEvent(t);const n=e.clone({target:this.source});this[yt]({...t,detail:n})}))}}[yt](t){if(!this.dragging)return;const e=getSensorEvent(t);const{container:n}=e;let r=e.target;const s=new DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:e});this.trigger(s);s.canceled()&&e.cancel();r=closest(r,this.options.draggable);const o=closest(e.target,this.containers);const i=e.overContainer||o;const a=this.currentOverContainer&&i!==this.currentOverContainer;const l=this.currentOver&&r!==this.currentOver;const c=i&&this.currentOverContainer!==i;const d=o&&r&&this.currentOver!==r;if(l){const t=new DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:e,over:this.currentOver,overContainer:this.currentOverContainer});this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over"));this.currentOver=null;this.trigger(t)}if(a){const t=new DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:e,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over"));this.currentOverContainer=null;this.trigger(t)}if(c){i.classList.add(...this.getClassNamesFor("container:over"));const t=new DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:e,overContainer:i});this.currentOverContainer=i;this.trigger(t)}if(d){r.classList.add(...this.getClassNamesFor("draggable:over"));const t=new DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:n,sensorEvent:e,overContainer:i,over:r});this.currentOver=r;this.trigger(t)}}[wt](t){if(!this.dragging)return;this.dragging=false;const e=new DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:t?t.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(e);e.canceled()||this.source.parentNode.insertBefore(this.originalSource,this.source);this.source.remove();this.originalSource.style.display="";this.source.classList.remove(...this.getClassNamesFor("source:dragging"));this.originalSource.classList.remove(...this.getClassNamesFor("source:original"));this.originalSource.classList.add(...this.getClassNamesFor("source:placed"));this.sourceContainer.classList.add(...this.getClassNamesFor("container:placed"));this.sourceContainer.classList.remove(...this.getClassNamesFor("container:dragging"));document.body.classList.remove(...this.getClassNamesFor("body:dragging"));applyUserSelect(document.body,"");this.currentOver&&this.currentOver.classList.remove(...this.getClassNamesFor("draggable:over"));this.currentOverContainer&&this.currentOverContainer.classList.remove(...this.getClassNamesFor("container:over"));this.lastPlacedSource=this.originalSource;this.lastPlacedContainer=this.sourceContainer;this.placedTimeoutID=setTimeout((()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(...this.getClassNamesFor("source:placed"));this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(...this.getClassNamesFor("container:placed"));this.lastPlacedSource=null;this.lastPlacedContainer=null}),this.options.placedTimeout);const n=new DragStoppedEvent({source:this.source,originalSource:this.originalSource,sensorEvent:t?t.sensorEvent:null,sourceContainer:this.sourceContainer});this.trigger(n);this.source=null;this.originalSource=null;this.currentOverContainer=null;this.currentOver=null;this.sourceContainer=null}[Ct](t){this[wt](t)}[Dt](t){if(!this.dragging)return;const e=getSensorEvent(t);const n=this.source||closest(e.originalEvent.target,this.options.draggable);const r=new DragPressureEvent({sensorEvent:e,source:n,pressure:e.pressure});this.trigger(r)}}Draggable.Plugins={Announcement:Announcement,Focusable:Focusable,Mirror:Mirror,Scrollable:Scrollable};Draggable.Sensors={MouseSensor:MouseSensor,TouchSensor:TouchSensor};function getSensorEvent(t){return t.detail}function applyUserSelect(t,e){t.style.webkitUserSelect=e;t.style.mozUserSelect=e;t.style.msUserSelect=e;t.style.oUserSelect=e;t.style.userSelect=e}class DroppableEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get dragEvent(){return this.data.dragEvent}}DroppableEvent.type="droppable";class DroppableStartEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStartEvent.type="droppable:start";DroppableStartEvent.cancelable=true;class DroppableDroppedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableDroppedEvent.type="droppable:dropped";DroppableDroppedEvent.cancelable=true;class DroppableReturnedEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableReturnedEvent.type="droppable:returned";DroppableReturnedEvent.cancelable=true;class DroppableStopEvent extends DroppableEvent{get dropzone(){return this.data.dropzone}}DroppableStopEvent.type="droppable:stop";DroppableStopEvent.cancelable=true;const At=Symbol("onDragStart");const Lt=Symbol("onDragMove");const Ft=Symbol("onDragStop");const Tt=Symbol("dropInDropZone");const Xt=Symbol("returnToOriginalDropzone");const Yt=Symbol("closestDropzone");const Pt=Symbol("getDropzones");function onDroppableDroppedDefaultAnnouncement({dragEvent:t,dropzone:e}){const n=t.source.textContent.trim()||t.source.id||"draggable element";const r=e.textContent.trim()||e.id||"droppable element";return`Dropped ${n} into ${r}`}function onDroppableReturnedDefaultAnnouncement({dragEvent:t,dropzone:e}){const n=t.source.textContent.trim()||t.source.id||"draggable element";const r=e.textContent.trim()||e.id||"droppable element";return`Returned ${n} from ${r}`}const Nt={"droppable:dropped":onDroppableDroppedDefaultAnnouncement,"droppable:returned":onDroppableReturnedDefaultAnnouncement};const zt={"droppable:active":"draggable-dropzone--active","droppable:occupied":"draggable-dropzone--occupied"};const It={dropzone:".draggable-droppable"};class Droppable extends Draggable{constructor(t=[],e={}){super(t,{...It,...e,classes:{...zt,...e.classes||{}},announcements:{...Nt,...e.announcements||{}}});this.dropzones=null;this.lastDropzone=null;this.initialDropzone=null;this[At]=this[At].bind(this);this[Lt]=this[Lt].bind(this);this[Ft]=this[Ft].bind(this);this.on("drag:start",this[At]).on("drag:move",this[Lt]).on("drag:stop",this[Ft])}destroy(){super.destroy();this.off("drag:start",this[At]).off("drag:move",this[Lt]).off("drag:stop",this[Ft])}[At](t){if(t.canceled())return;this.dropzones=[...this[Pt]()];const e=closest(t.sensorEvent.target,this.options.dropzone);if(!e){t.cancel();return}const n=new DroppableStartEvent({dragEvent:t,dropzone:e});this.trigger(n);if(n.canceled())t.cancel();else{this.initialDropzone=e;for(const t of this.dropzones)t.classList.contains(this.getClassNameFor("droppable:occupied"))||t.classList.add(...this.getClassNamesFor("droppable:active"))}}[Lt](t){if(t.canceled())return;const e=this[Yt](t.sensorEvent.target);const n=e&&!e.classList.contains(this.getClassNameFor("droppable:occupied"));if(n&&this[Tt](t,e))this.lastDropzone=e;else if((!e||e===this.initialDropzone)&&this.lastDropzone){this[Xt](t);this.lastDropzone=null}}[Ft](t){const e=new DroppableStopEvent({dragEvent:t,dropzone:this.lastDropzone||this.initialDropzone});this.trigger(e);const n=this.getClassNamesFor("droppable:occupied");for(const t of this.dropzones)t.classList.remove(...this.getClassNamesFor("droppable:active"));this.lastDropzone&&this.lastDropzone!==this.initialDropzone&&this.initialDropzone.classList.remove(...n);this.dropzones=null;this.lastDropzone=null;this.initialDropzone=null}[Tt](t,e){const n=new DroppableDroppedEvent({dragEvent:t,dropzone:e});this.trigger(n);if(n.canceled())return false;const r=this.getClassNamesFor("droppable:occupied");this.lastDropzone&&this.lastDropzone.classList.remove(...r);e.appendChild(t.source);e.classList.add(...r);return true}[Xt](t){const e=new DroppableReturnedEvent({dragEvent:t,dropzone:this.lastDropzone});this.trigger(e);if(!e.canceled()){this.initialDropzone.appendChild(t.source);this.lastDropzone.classList.remove(...this.getClassNamesFor("droppable:occupied"))}}[Yt](t){return this.dropzones?closest(t,this.dropzones):null}[Pt](){const t=this.options.dropzone;return typeof t==="string"?document.querySelectorAll(t):t instanceof NodeList||t instanceof Array?t:typeof t==="function"?t():[]}}class SwappableEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get dragEvent(){return this.data.dragEvent}}SwappableEvent.type="swappable";class SwappableStartEvent extends SwappableEvent{}SwappableStartEvent.type="swappable:start";SwappableStartEvent.cancelable=true;class SwappableSwapEvent extends SwappableEvent{get over(){return this.data.over}get overContainer(){return this.data.overContainer}}SwappableSwapEvent.type="swappable:swap";SwappableSwapEvent.cancelable=true;class SwappableSwappedEvent extends SwappableEvent{get swappedElement(){return this.data.swappedElement}}SwappableSwappedEvent.type="swappable:swapped";class SwappableStopEvent extends SwappableEvent{}SwappableStopEvent.type="swappable:stop";const $t=Symbol("onDragStart");const Bt=Symbol("onDragOver");const kt=Symbol("onDragStop");function onSwappableSwappedDefaultAnnouncement({dragEvent:t,swappedElement:e}){const n=t.source.textContent.trim()||t.source.id||"swappable element";const r=e.textContent.trim()||e.id||"swappable element";return`Swapped ${n} with ${r}`}const Rt={"swappabled:swapped":onSwappableSwappedDefaultAnnouncement};class Swappable extends Draggable{constructor(t=[],e={}){super(t,{...e,announcements:{...Rt,...e.announcements||{}}});this.lastOver=null;this[$t]=this[$t].bind(this);this[Bt]=this[Bt].bind(this);this[kt]=this[kt].bind(this);this.on("drag:start",this[$t]).on("drag:over",this[Bt]).on("drag:stop",this[kt])}destroy(){super.destroy();this.off("drag:start",this._onDragStart).off("drag:over",this._onDragOver).off("drag:stop",this._onDragStop)}[$t](t){const e=new SwappableStartEvent({dragEvent:t});this.trigger(e);e.canceled()&&t.cancel()}[Bt](t){if(t.over===t.originalSource||t.over===t.source||t.canceled())return;const e=new SwappableSwapEvent({dragEvent:t,over:t.over,overContainer:t.overContainer});this.trigger(e);if(e.canceled())return;this.lastOver&&this.lastOver!==t.over&&swap(this.lastOver,t.source);this.lastOver===t.over?this.lastOver=null:this.lastOver=t.over;swap(t.source,t.over);const n=new SwappableSwappedEvent({dragEvent:t,swappedElement:t.over});this.trigger(n)}[kt](t){const e=new SwappableStopEvent({dragEvent:t});this.trigger(e);this.lastOver=null}}function withTempElement(t){const e=document.createElement("div");t(e);e.remove()}function swap(t,e){const n=e.parentNode;const r=t.parentNode;withTempElement((s=>{r.insertBefore(s,t);n.insertBefore(t,e);r.insertBefore(e,s)}))}class SortableEvent extends AbstractEvent{constructor(t){super(t);this.data=t}get dragEvent(){return this.data.dragEvent}}SortableEvent.type="sortable";class SortableStartEvent extends SortableEvent{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}SortableStartEvent.type="sortable:start";SortableStartEvent.cancelable=true;class SortableSortEvent extends SortableEvent{get currentIndex(){return this.data.currentIndex}get over(){return this.data.over}get overContainer(){return this.data.dragEvent.overContainer}}SortableSortEvent.type="sortable:sort";SortableSortEvent.cancelable=true;class SortableSortedEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableSortedEvent.type="sortable:sorted";class SortableStopEvent extends SortableEvent{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}SortableStopEvent.type="sortable:stop";const qt=Symbol("onDragStart");const _t=Symbol("onDragOverContainer");const jt=Symbol("onDragOver");const Ht=Symbol("onDragStop");function onSortableSortedDefaultAnnouncement({dragEvent:t}){const e=t.source.textContent.trim()||t.source.id||"sortable element";if(t.over){const n=t.over.textContent.trim()||t.over.id||"sortable element";const r=t.source.compareDocumentPosition(t.over)&Node.DOCUMENT_POSITION_FOLLOWING;return r?`Placed ${e} after ${n}`:`Placed ${e} before ${n}`}return`Placed ${e} into a different container`}const Vt={"sortable:sorted":onSortableSortedDefaultAnnouncement};class Sortable extends Draggable{constructor(t=[],e={}){super(t,{...e,announcements:{...Vt,...e.announcements||{}}});this.startIndex=null;this.startContainer=null;this[qt]=this[qt].bind(this);this[_t]=this[_t].bind(this);this[jt]=this[jt].bind(this);this[Ht]=this[Ht].bind(this);this.on("drag:start",this[qt]).on("drag:over:container",this[_t]).on("drag:over",this[jt]).on("drag:stop",this[Ht])}destroy(){super.destroy();this.off("drag:start",this[qt]).off("drag:over:container",this[_t]).off("drag:over",this[jt]).off("drag:stop",this[Ht])}index(t){return this.getSortableElementsForContainer(t.parentNode).indexOf(t)}getSortableElementsForContainer(t){const e=t.querySelectorAll(this.options.draggable);return[...e].filter((e=>e!==this.originalSource&&e!==this.mirror&&e.parentNode===t))}[qt](t){this.startContainer=t.source.parentNode;this.startIndex=this.index(t.source);const e=new SortableStartEvent({dragEvent:t,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(e);e.canceled()&&t.cancel()}[_t](t){if(t.canceled())return;const{source:e,over:n,overContainer:r}=t;const s=this.index(e);const o=new SortableSortEvent({dragEvent:t,currentIndex:s,source:e,over:n});this.trigger(o);if(o.canceled())return;const i=this.getSortableElementsForContainer(r);const a=move({source:e,over:n,overContainer:r,children:i});if(!a)return;const{oldContainer:l,newContainer:c}=a;const d=this.index(t.source);const h=new SortableSortedEvent({dragEvent:t,oldIndex:s,newIndex:d,oldContainer:l,newContainer:c});this.trigger(h)}[jt](t){if(t.over===t.originalSource||t.over===t.source)return;const{source:e,over:n,overContainer:r}=t;const s=this.index(e);const o=new SortableSortEvent({dragEvent:t,currentIndex:s,source:e,over:n});this.trigger(o);if(o.canceled())return;const i=this.getDraggableElementsForContainer(r);const a=move({source:e,over:n,overContainer:r,children:i});if(!a)return;const{oldContainer:l,newContainer:c}=a;const d=this.index(e);const h=new SortableSortedEvent({dragEvent:t,oldIndex:s,newIndex:d,oldContainer:l,newContainer:c});this.trigger(h)}[Ht](t){const e=new SortableStopEvent({dragEvent:t,oldIndex:this.startIndex,newIndex:this.index(t.source),oldContainer:this.startContainer,newContainer:t.source.parentNode});this.trigger(e);this.startIndex=null;this.startContainer=null}}function index(t){return Array.prototype.indexOf.call(t.parentNode.children,t)}function move({source:t,over:e,overContainer:n,children:r}){const s=!r.length;const o=t.parentNode!==n;const i=e&&t.parentNode===e.parentNode;return s?moveInsideEmptyContainer(t,n):i?moveWithinContainer(t,e):o?moveOutsideContainer(t,e,n):null}function moveInsideEmptyContainer(t,e){const n=t.parentNode;e.appendChild(t);return{oldContainer:n,newContainer:e}}function moveWithinContainer(t,e){const n=index(t);const r=index(e);n<r?t.parentNode.insertBefore(t,e.nextElementSibling):t.parentNode.insertBefore(t,e);return{oldContainer:t.parentNode,newContainer:t.parentNode}}function moveOutsideContainer(t,e,n){const r=t.parentNode;e?e.parentNode.insertBefore(t,e):n.appendChild(t);return{oldContainer:r,newContainer:t.parentNode}}export{AbstractEvent as BaseEvent,AbstractPlugin as BasePlugin,Draggable,Droppable,V as Plugins,O as Sensors,Sortable,Swappable};

