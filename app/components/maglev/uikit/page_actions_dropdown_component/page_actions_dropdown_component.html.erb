<%= render Maglev::Uikit::MenuDropdownComponent.new(icon_name: icon_name) do |menu_dropdown| %>
  <% menu_dropdown.with_item_link_to(paths[:edit], data: { turbo_frame: '_top' }) do |menu_item| %>
    <% menu_item.with_icon_content('settings') %>
    <% menu_item.with_label_content(t('maglev.editor.pages.actions.edit')) %>
  <% end if allow?(:edit) %>

  <% menu_dropdown.with_item_divider if allow?(:edit) %>

  <% menu_dropdown.with_item_nested_menu(placement: 'right-start') do |menu_item| %>
    <% menu_item.with_icon_content('preview') %>
    <% menu_item.with_label_content(t('maglev.editor.pages.actions.preview')) %>

    <% menu_item.with_item_link_to(paths[:preview], target: '_blank') do |sub_menu_item| %>
      <% sub_menu_item.with_label_content(t('maglev.editor.pages.actions.draft_preview')) %>
    <% end %>

    <% menu_item.with_item_link_to(live_url, target: '_blank') do |sub_menu_item| %>
      <% sub_menu_item.with_label_content(t('maglev.editor.pages.actions.live_preview')) %>
    <% end %>    
  <% end %>  

  <% menu_dropdown.with_item_wrapper(data: { controller: 'copy-to-clipboard', copy_to_clipboard_source_value: live_url }) do |wrapper_item| %>
    <% wrapper_item.with_item_button(data: { copy_to_clipboard_target: 'text', action: 'click->copy-to-clipboard#copy:prevent' }) do |menu_item| %>
      <% menu_item.with_icon_content('clipboard') %>
      <% menu_item.with_label_content(t('maglev.editor.pages.actions.copy_url_to_clipboard')) %>
    <% end %>

    <% wrapper_item.with_item_button(class: 'hidden text-green-500', data: { copy_to_clipboard_target: 'success' }) do |menu_item| %>
      <% menu_item.with_icon_content('checkbox_circle') %>
      <% menu_item.with_label_content(t('maglev.editor.pages.actions.copy_url_to_clipboard_success')) %>
    <% end %>
  <% end if allow?(:copy_url_to_clipboard) %>

  <% menu_dropdown.with_item_divider if allow?(:clone) || allow?(:delete) %>

  <% menu_dropdown.with_item_button_to(paths[:clone], data: { turbo_frame: '_top' }) do |menu_item| %>
    <% menu_item.with_icon_content('clone') %>
    <% menu_item.with_label_content(t('maglev.editor.pages.actions.clone')) %>
  <% end if allow?(:clone) %>

  <% menu_dropdown.with_item_button_to(paths[:delete], method: :delete, variant: 'danger', data: { turbo_confirm: t('maglev.editor.pages.actions.confirm_delete'), turbo_frame: '_top' }) do |menu_item| %>
    <% menu_item.with_icon_content('delete_bin') %>
    <% menu_item.with_label_content(t('maglev.editor.pages.actions.delete')) %>
  <% end if allow?(:delete) %>
<% end %>