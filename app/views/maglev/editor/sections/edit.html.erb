<%= render Maglev::Uikit::PageLayoutComponent.new(expanded: true, back_path: editor_real_root_path(maglev_editing_route_context)) do |page_layout| %>
  <% page_layout.with_title_content @section.type_name %>
  <% page_layout.with_notification_content maglev_flash_message %>

  <% page_layout.with_back_link(path: editor_sections_stores_path(maglev_editing_route_context)).with_content(t('maglev.editor.sections.breadcrumbs.sections')) %>    

  <%= form_with url: editor_section_path(@section, maglev_editing_route_context), method: :put, data: { 
      controller: 'editor-section-form', 
      'editor-section-form-section-id-value': @section.id,
      'editor-section-form-section-lock-version-value': @section.lock_version,
      action: %(
        editor-setting:change->editor-section-form#onSettingChange
        editor-section-form:connected@window->editor-preview-notification-center#checkSectionLockVersion
        editor-section-form:connected@window->editor-preview-notification-center#pingSection
        editor-section-form:updateSetting->editor-preview-notification-center#updateSetting
        editor-section-form:updateSection->editor-preview-notification-center#updateSection
        client:setting:updated@window->editor-section-form#afterSettingUpdate
        dispatcher:section-#{@section.id}:persisted@window->editor-section-form#onPersist
      )
    } do 
  %>    
    <%= render 'maglev/editor/sections/form' %>
  <% end %>
<% end %>