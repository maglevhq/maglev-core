<%= render Maglev::Uikit::PageLayoutComponent.new(expanded: true, back_path: editor_real_root_path(maglev_editing_route_context)) do |page_layout| %>
  <% page_layout.with_title_content t('maglev.editor.sections.new.title') %>
  <% page_layout.with_notification_content maglev_flash_message %>

  <% page_layout.with_back_link(path: editor_sections_path(maglev_editing_route_context)).with_content(t('maglev.editor.sections.breadcrumbs.sections')) %>

  <%= form_with url: editor_sections_path(maglev_editing_route_context), data: { 
      turbo_frame: '_top',
      controller: 'auto-save dispatcher',
      action: %(
        turbo:submit-end->editor-preview-notification-center#addSection
        turbo:submit-end->dispatcher#trigger
      ),
      'dispatcher-event-name-value': 'page-preview:remove-empty-message'
    } do |f| %>
    <%= f.hidden_field :position, value: @position %>

    <%= render 'theme_list', f: f %>
  <% end %>
<% end %>