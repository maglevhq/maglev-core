<% if @section.definition.root_blocks.count == 1 %>
  <%= button_to t('maglev.editor.section_blocks.index.add_button'),
    editor_section_blocks_path(@section, block_type: @section.definition.root_blocks.first.type, **maglev_editing_route_context), 
    class: maglev_button_classes(size: :big),
    method: :post,
    name: 'add_section_block',
    form: {
      data: { 
        turbo_frame: '_top',
        action: 'turbo:submit-end->editor-preview-notification-center#addSectionBlock',
        'editor-preview-notification-center-section-id-param': @section.id,
      } 
    }
  %>
<% else %>
  <%= render Maglev::Uikit::DropdownComponent.new do |dropdown| %>
    <% dropdown.with_trigger do %>
      <%= button_tag t('maglev.editor.section_blocks.index.add_button'), 
        type: 'button',
        class: maglev_button_classes(size: :big),
        data: {
          action: 'click->uikit-dropdown#toggle',
          'uikit-dropdown-target': 'button'
        }
      %>
    <% end %>
            
    <div class="p-4">
      <%= render 'maglev/editor/section_blocks/new', blocks: @section.definition.root_blocks %>
    </div>
  <% end %>
<% end %>